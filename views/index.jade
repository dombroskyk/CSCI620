doctype html
html
	head
		title
			| Plant Finder
			
		link(href='/css/project.css', rel='stylesheet')
		link(rel='stylesheet', href='http://js.arcgis.com/3.14/esri/css/esri.css')
		
		script(src="http://js.arcgis.com/3.14/")
		
		script.
			var map;
			require([
				"esri/map", "esri/layers/FeatureLayer", "esri/InfoTemplate",
				"esri/symbols/SimpleLineSymbol", "esri/symbols/SimpleFillSymbol",
				"esri/renderers/UniqueValueRenderer", "esri/Color",
				"dojo/domReady!"
			], function(
				Map, FeatureLayer, InfoTemplate,
				SimpleLineSymbol, SimpleFillSymbol,
				UniqueValueRenderer, Color
			) {
				map = new Map("map", {
					basemap: "gray",
					center: [-100, 50],
					zoom: 4,
					slider: true
				});
				map.on("load", addFeatureLayer);
		
				function addFeatureLayer() {
					var defaultSymbol = new SimpleFillSymbol().setStyle(SimpleFillSymbol.STYLE_NULL);
					defaultSymbol.outline.setStyle(SimpleLineSymbol.STYLE_NULL);
			
					//create renderer
					var renderer = new UniqueValueRenderer(defaultSymbol, "STATE_NAME");
					var canadaRenderer = new UniqueValueRenderer(defaultSymbol, "NAME");
			
					//add symbol for each possible value
					var usa_val_names = ["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho",
										"Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi",
										"Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota",
										"Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont",
										"Virginia","Washington","West Virginia","Wisconsin","Wyoming"],
						can_val_names = ["British Columbia","Yukon","Northwest Territories","Alberta","Saskatchewan","Nunavut","Manitoba","Ontario","Quebec","Newfoundland and Labrador","New Brunswick","Nova Scotia"];
					for( i = 0; i < usa_val_names.length; i++ ){
						var val_name = usa_val_names[i];
						renderer.addValue(val_name, new SimpleFillSymbol().setColor(new Color([0, 255, 0, 0.5])));
					}
					for( i = 0; i < can_val_names.length; i++ ){
						var val_name = can_val_names[i];
						canadaRenderer.addValue(val_name, new SimpleFillSymbol().setColor(new Color([0, 255, 0, 0.5])));
					}
					
					var featureLayer = new FeatureLayer("http://sampleserver1.arcgisonline.com/ArcGIS/rest/services/Specialty/ESRI_StateCityHighway_USA/MapServer/1", {
						infoTemplate: new InfoTemplate("&nbsp;", "${STATE_NAME}"),
						mode: FeatureLayer.MODE_ONDEMAND,
						outFields: ["STATE_NAME"]
					});
					
					
					
					var canadaFeatureLayer = new FeatureLayer("https://nowcoast.noaa.gov/arcgis/rest/services/nowcoast/mapoverlays_political/MapServer/4",{
						infoTemplate: new InfoTemplate("&nbsp;", "${NAME}"),
						mode: FeatureLayer.MODE_ONDEMAND,
						outFields: ["NAME"]
					});
					
					featureLayer.setRenderer(renderer);
					canadaFeatureLayer.setRenderer(canadaRenderer);
					map.addLayers([canadaFeatureLayer,featureLayer]);
				}
			});
		
	body
		div(id="header")
		div(id="center-wrapper")
			div(id="center")
				div(id="sidebar")
					input
				div(id="map-wrapper")
					div(id="map")
		div(id="footer")